function X(){return/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function K(){const d=document.getElementById("flowfield"),l=document.getElementById("fullystacked"),h=d.getContext("2d");let y=l.clientWidth,c=l.clientHeight;d.width=y,d.height=c;const u=20;let E,P,f,$=0;const L=X()?100:1e3,C=[],k=[];let e={x:null,y:null},q=0;const R=1e3/6;function J(){y=l.clientWidth,c=l.clientHeight,d.width=y,d.height=c,E=Math.floor(y/u),P=Math.floor(c/u),f=new Array(E*P).fill(0)}window.addEventListener("resize",J),J(),window.addEventListener("mousemove",n=>{const t=d.getBoundingClientRect();e.x=n.clientX-t.left,e.y=n.clientY-t.top});class Q{constructor(){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=Array.from({length:256},()=>Math.floor(Math.random()*256)),this.perm=[...this.p,...this.p]}dot(t,s,r,i){return t[0]*s+t[1]*r+t[2]*i}noise(t,s,r){const i=.3333333333333333,o=1/6;let a=(t+s+r)*i,x=Math.floor(t+a),S=Math.floor(s+a),N=Math.floor(r+a),W=(x+S+N)*o,A=t-(x-W),I=s-(S-W),m=r-(N-W),p,g,w,M,v,b;A>=I?I>=m?(p=1,g=0,w=0,M=1,v=1,b=0):A>=m?(p=1,g=0,w=0,M=1,v=0,b=1):(p=0,g=0,w=1,M=1,v=0,b=1):I<m?(p=0,g=0,w=1,M=0,v=1,b=1):A<m?(p=0,g=1,w=0,M=0,v=1,b=1):(p=0,g=1,w=0,M=1,v=1,b=0);const B=(H,z,G,ot)=>{let T=.6-H*H-z*z-G*G;return T<0?0:(T*=T,T*T*this.dot(this.grad3[ot],H,z,G))};let O=x&255,j=S&255,F=N&255,tt=this.perm[O+this.perm[j+this.perm[F]]]%12,et=this.perm[O+p+this.perm[j+g+this.perm[F+w]]]%12,it=this.perm[O+M+this.perm[j+v+this.perm[F+b]]]%12,st=this.perm[O+1+this.perm[j+1+this.perm[F+1]]]%12;return 32*(B(A,I,m,tt)+B(A-p+o,I-g+o,m-w+o,et)+B(A-M+2*o,I-v+2*o,m-b+2*o,it)+B(A-1+3*o,I-1+3*o,m-1+3*o,st))}}const U=new Q;function Z(){let n=0;for(let t=0;t<P;t++)for(let s=0;s<E;s++){const r=U.noise(s*.1,t*.1,$)*Math.PI*2;f[n++]=r}}class D{constructor(){this.reset()}reset(){this.x=Math.random()*y,this.y=Math.random()*c,this.vx=0,this.vy=0,this.speed=1,this.history=[]}update(){if(this.x>y||this.x<0||this.y>c||this.y<0){C.splice(C.indexOf(this),1),C.push(new D),delete this;return}const t=Math.floor(this.x/u),r=Math.floor(this.y/u)*E+t;if(f[r]!==void 0){const i=f[r];this.vx+=Math.cos(i)*.1,this.vy+=Math.sin(i)*.1}if(e.x!==null&&e.y!==null){const i=e.x-this.x,o=e.y-this.y,a=Math.sqrt(i*i+o*o);if(a<100){const x=(1-a/100)*.5;this.vx+=i*x*.01,this.vy+=o*x*.01}}if(this.vx*=.9,this.vy*=.9,this.x+=this.vx,this.y+=this.vy,this.history.push([this.x,this.y]),this.history.length>5&&this.history.shift(),(this.x<0||this.x>y||this.y<0||this.y>c)&&this.reset(),e.x!==null&&e.y!==null){const i=Date.now(),o=this.x-e.x,a=this.y-e.y;Math.sqrt(o*o+a*a)<50&&i-q>R&&(k.push(new _(this.x,this.y)),q=i)}}draw(t){if(this.history.length<2)return;t.beginPath(),t.moveTo(this.history[0][0],this.history[0][1]);for(let i=1;i<this.history.length;i++)t.lineTo(this.history[i][0],this.history[i][1]);let s=[188,58,160],r=.2;if(e.x!==null&&e.y!==null){let i=this.x-e.x,o=this.y-e.y,a=Math.sqrt(i*i+o*o);if(a<200){let x=1-a/200;s=s.map(S=>Math.min(255,S+x*(255-S)))}}t.strokeStyle=`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${r})`,t.lineWidth=X()?3:1,t.stroke()}}class _{constructor(t,s){this.x=t,this.y=s,this.vx=(Math.random()-.5)*1.5,this.vy=(Math.random()-.5)*1.5,this.life=60}update(){this.x+=this.vx,this.y+=this.vy,this.life--}draw(t){const s=this.life/60;t.beginPath(),t.arc(this.x,this.y,1,0,Math.PI*2),t.fillStyle=`rgba(255, 255, 255, ${s})`,t.fill()}isAlive(){return this.life>0}}for(let n=0;n<L;n++)C.push(new D);function V(){h.globalCompositeOperation="destination-out",h.fillStyle="rgba(0, 0, 0, 0.1)",h.fillRect(0,0,y,c),h.globalCompositeOperation="lighter",$+=.003,Z(),C.forEach(n=>{n.update(),n.draw(h)});for(let n=k.length-1;n>=0;n--){const t=k[n];t.update(),t.draw(h),t.isAlive()||k.splice(n,1)}requestAnimationFrame(V)}V(),setTimeout(()=>{d.classList.remove("opacity-0")},100)}K();window.addEventListener("resize",K);const Y=document.querySelectorAll("[data-word-rotator]");Y.length&&Y.forEach(d=>{const l={text1:d.querySelector(".text1"),text2:d.querySelector(".text2")},h=JSON.parse(d.dataset.wordRotator),y=1,c=.5;let u=h.length-1,E=new Date,P=0,f=c;l.text1.textContent=h[u%h.length],l.text2.textContent=h[(u+1)%h.length];function $(){P-=f,f=0;let e=P/y;e>1&&(f=c,e=1),L(e)}function L(e){l.text2.style.filter=`blur(${Math.min(8/e-8,100)}px)`,l.text2.style.opacity=`${Math.pow(e,.4)*100}%`,e=1-e,l.text1.style.filter=`blur(${Math.min(8/e-8,100)}px)`,l.text1.style.opacity=`${Math.pow(e,.4)*100}%`,l.text1.textContent=h[u%h.length],l.text2.textContent=h[(u+1)%h.length]}function C(){P=0,l.text2.style.filter="",l.text2.style.opacity="100%",l.text1.style.filter="",l.text1.style.opacity="0%"}function k(){requestAnimationFrame(k);let e=new Date,q=f>0,R=(e-E)/1e3;E=e,f-=R,f<=0?(q&&u++,$()):C()}k()});
