function Z(){return/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function X(){const s=document.getElementById("flowfield"),i=document.getElementById("fullystacked"),o=s.getContext("2d");let f=i.clientWidth,c=i.clientHeight;s.width=f,s.height=c;const m=20;let A,P;const d=Z(),j=d?500:1e3,k=[],C=[];let r={x:null,y:null},l=0;class F{constructor(e,t){this.x=e,this.y=t,this.vx=(Math.random()-.5)*2,this.vy=(Math.random()-.5)*2,this.life=1,this.startTime=performance.now()}update(){this.x+=this.vx,this.y+=this.vy,this.life=1-(performance.now()-this.startTime)/3e3}draw(e){this.life<=0||(e.beginPath(),e.arc(this.x,this.y,1.5,0,Math.PI*2),e.fillStyle=`rgba(255, 255, 255, ${this.life})`,e.fill())}isAlive(){return this.life>0}}function S(){f=i.clientWidth,c=i.clientHeight,s.width=f,s.height=c,A=Math.floor(f/m),P=Math.floor(c/m),new Array(A*P).fill(0)}window.addEventListener("resize",S),S(),window.addEventListener("mousemove",a=>{const e=s.getBoundingClientRect();if(r.x=a.clientX-e.left,r.y=a.clientY-e.top,d){const t=performance.now();if(t-l>100){for(let n=0;n<8;n++)C.push(new F(r.x,r.y));l=t}}});class Y{constructor(){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=Array.from({length:256},()=>Math.floor(Math.random()*256)),this.perm=[...this.p,...this.p]}dot(e,t,n,$){return e[0]*t+e[1]*n+e[2]*$}noise(e,t,n){const $=.3333333333333333,h=1/6;let L=(e+t+n)*$,O=Math.floor(e+L),R=Math.floor(t+L),D=Math.floor(n+L),H=(O+R+D)*h,v=e-(O-H),b=t-(R-H),u=n-(D-H),p,w,g,x,y,M;v>=b?b>=u?(p=1,w=0,g=0,x=1,y=1,M=0):v>=u?(p=1,w=0,g=0,x=1,y=0,M=1):(p=0,w=0,g=1,x=1,y=0,M=1):b<u?(p=0,w=0,g=1,x=0,y=1,M=1):v<u?(p=0,w=1,g=0,x=0,y=1,M=1):(p=0,w=1,g=0,x=1,y=1,M=0);const q=(N,W,G,V)=>{let E=.6-N*N-W*W-G*G;return E<0?0:(E*=E,E*E*this.dot(this.grad3[V],N,W,G))};let B=O&255,I=R&255,T=D&255,_=this.perm[B+this.perm[I+this.perm[T]]]%12,z=this.perm[B+p+this.perm[I+w+this.perm[T+g]]]%12,K=this.perm[B+x+this.perm[I+y+this.perm[T+M]]]%12,U=this.perm[B+1+this.perm[I+1+this.perm[T+1]]]%12;return 32*(q(v,b,u,_)+q(v-p+h,b-w+h,u-g+h,z)+q(v-x+2*h,b-y+2*h,u-M+2*h,K)+q(v-1+3*h,b-1+3*h,u-1+3*h,U))}}new Y;for(let a=0;a<j;a++)k.push(new Particle);function J(){o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, 0.1)",o.fillRect(0,0,f,c),o.globalCompositeOperation="lighter",generateFlowField();const a=new Quadtree({x:0,y:0,width:f,height:c},4);for(const t of k)a.insert(t);let e=[];r.x!==null&&r.y!==null&&(e=a.query({x:r.x-300,y:r.y-300,width:600,height:600}));for(const t of k)t._nearMouse=e.includes(t),t.update(),t.draw(o);for(let t=C.length-1;t>=0;t--){const n=C[t];n.update(),n.draw(o),n.isAlive()||C.splice(t,1)}requestAnimationFrame(J)}J(),setTimeout(()=>s.classList.remove("opacity-0"),100)}X();window.addEventListener("resize",X);const Q=document.querySelectorAll("[data-word-rotator]");Q.length&&Q.forEach(s=>{const i={text1:s.querySelector(".text1"),text2:s.querySelector(".text2")},o=JSON.parse(s.dataset.wordRotator),f=1,c=.5;let m=o.length-1,A=new Date,P=0,d=c;i.text1.textContent=o[m%o.length],i.text2.textContent=o[(m+1)%o.length];function j(){P-=d,d=0;let l=P/f;l>1&&(d=c,l=1),k(l)}function k(l){i.text2.style.filter=`blur(${Math.min(8/l-8,100)}px)`,i.text2.style.opacity=`${Math.pow(l,.4)*100}%`,l=1-l,i.text1.style.filter=`blur(${Math.min(8/l-8,100)}px)`,i.text1.style.opacity=`${Math.pow(l,.4)*100}%`,i.text1.textContent=o[m%o.length],i.text2.textContent=o[(m+1)%o.length]}function C(){P=0,i.text2.style.filter="",i.text2.style.opacity="100%",i.text1.style.filter="",i.text1.style.opacity="0%"}function r(){requestAnimationFrame(r);let l=new Date,F=d>0,S=(l-A)/1e3;A=l,d-=S,d<=0?(F&&m++,j()):C()}r()});
