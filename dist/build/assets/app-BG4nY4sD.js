function X(){return/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function Y(){if(X())return;const d=document.getElementById("flowfield"),n=document.getElementById("fullystacked"),h=d.getContext("2d");let u=n.clientWidth,f=n.clientHeight;d.width=u,d.height=f;const y=20;let P,E,c,T=0;const O=2e3,$=[],C=[];let e={x:null,y:null},q=0;const R=1e3/3;function G(){u=n.clientWidth,f=n.clientHeight,d.width=u,d.height=f,P=Math.floor(u/y),E=Math.floor(f/y),c=new Array(P*E).fill(0)}window.addEventListener("resize",G),G(),window.addEventListener("mousemove",l=>{const t=d.getBoundingClientRect();e.x=l.clientX-t.left,e.y=l.clientY-t.top});class _{constructor(){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=Array.from({length:256},()=>Math.floor(Math.random()*256)),this.perm=[...this.p,...this.p]}dot(t,s,r,i){return t[0]*s+t[1]*r+t[2]*i}noise(t,s,r){const i=.3333333333333333,o=1/6;let a=(t+s+r)*i,m=Math.floor(t+a),I=Math.floor(s+a),D=Math.floor(r+a),N=(m+I+D)*o,k=t-(m-N),A=s-(I-N),x=r-(D-N),p,g,w,M,v,b;k>=A?A>=x?(p=1,g=0,w=0,M=1,v=1,b=0):k>=x?(p=1,g=0,w=0,M=1,v=0,b=1):(p=0,g=0,w=1,M=1,v=0,b=1):A<x?(p=0,g=0,w=1,M=0,v=1,b=1):k<x?(p=0,g=1,w=0,M=0,v=1,b=1):(p=0,g=1,w=0,M=1,v=1,b=0);const B=(W,H,z,ot)=>{let S=.6-W*W-H*H-z*z;return S<0?0:(S*=S,S*S*this.dot(this.grad3[ot],W,H,z))};let j=m&255,F=I&255,L=D&255,tt=this.perm[j+this.perm[F+this.perm[L]]]%12,et=this.perm[j+p+this.perm[F+g+this.perm[L+w]]]%12,it=this.perm[j+M+this.perm[F+v+this.perm[L+b]]]%12,st=this.perm[j+1+this.perm[F+1+this.perm[L+1]]]%12;return 32*(B(k,A,x,tt)+B(k-p+o,A-g+o,x-w+o,et)+B(k-M+2*o,A-v+2*o,x-b+2*o,it)+B(k-1+3*o,A-1+3*o,x-1+3*o,st))}}const K=new _;function Q(){let l=0;for(let t=0;t<E;t++)for(let s=0;s<P;s++){const r=K.noise(s*.1,t*.1,T)*Math.PI*2;c[l++]=r}}class U{constructor(){this.reset()}reset(){this.x=Math.random()*u,this.y=Math.random()*f,this.vx=0,this.vy=0,this.speed=1,this.history=[]}update(){const t=Math.floor(this.x/y),r=Math.floor(this.y/y)*P+t;if(c[r]!==void 0){const i=c[r];this.vx+=Math.cos(i)*.1,this.vy+=Math.sin(i)*.1}if(e.x!==null&&e.y!==null){const i=e.x-this.x,o=e.y-this.y,a=Math.sqrt(i*i+o*o);if(a<100){const m=(1-a/100)*.5;this.vx+=i*m*.01,this.vy+=o*m*.01}}if(this.vx*=.9,this.vy*=.9,this.x+=this.vx,this.y+=this.vy,this.history.push([this.x,this.y]),this.history.length>5&&this.history.shift(),(this.x<0||this.x>u||this.y<0||this.y>f)&&this.reset(),e.x!==null&&e.y!==null){const i=Date.now(),o=this.x-e.x,a=this.y-e.y;Math.sqrt(o*o+a*a)<50&&i-q>R&&(C.push(new Z(this.x,this.y)),q=i)}}draw(t){if(this.history.length<2)return;t.beginPath(),t.moveTo(this.history[0][0],this.history[0][1]);for(let i=1;i<this.history.length;i++)t.lineTo(this.history[i][0],this.history[i][1]);let s=[188,58,160],r=.2;if(e.x!==null&&e.y!==null){let i=this.x-e.x,o=this.y-e.y,a=Math.sqrt(i*i+o*o);if(a<200){let m=1-a/200;s=s.map(I=>Math.min(255,I+m*(255-I)))}}t.strokeStyle=`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${r})`,t.lineWidth=1,t.stroke()}}class Z{constructor(t,s){this.x=t,this.y=s,this.vx=(Math.random()-.5)*1.5,this.vy=(Math.random()-.5)*1.5,this.life=60}update(){this.x+=this.vx,this.y+=this.vy,this.life--}draw(t){const s=this.life/60;t.beginPath(),t.arc(this.x,this.y,1,0,Math.PI*2),t.fillStyle=`rgba(255, 255, 255, ${s})`,t.fill()}isAlive(){return this.life>0}}for(let l=0;l<O;l++)$.push(new U);function J(){h.globalCompositeOperation="destination-out",h.fillStyle="rgba(0, 0, 0, 0.1)",h.fillRect(0,0,u,f),h.globalCompositeOperation="lighter",T+=.003,Q(),$.forEach(l=>{l.update(),l.draw(h)});for(let l=C.length-1;l>=0;l--){const t=C[l];t.update(),t.draw(h),t.isAlive()||C.splice(l,1)}requestAnimationFrame(J)}J(),setTimeout(()=>{d.classList.remove("opacity-0")},100)}X()||Y();window.addEventListener("resize",Y);const V=document.querySelectorAll("[data-word-rotator]");V.length&&V.forEach(d=>{const n={text1:d.querySelector(".text1"),text2:d.querySelector(".text2")},h=JSON.parse(d.dataset.wordRotator),u=1,f=.5;let y=h.length-1,P=new Date,E=0,c=f;n.text1.textContent=h[y%h.length],n.text2.textContent=h[(y+1)%h.length];function T(){E-=c,c=0;let e=E/u;e>1&&(c=f,e=1),O(e)}function O(e){n.text2.style.filter=`blur(${Math.min(8/e-8,100)}px)`,n.text2.style.opacity=`${Math.pow(e,.4)*100}%`,e=1-e,n.text1.style.filter=`blur(${Math.min(8/e-8,100)}px)`,n.text1.style.opacity=`${Math.pow(e,.4)*100}%`,n.text1.textContent=h[y%h.length],n.text2.textContent=h[(y+1)%h.length]}function $(){E=0,n.text2.style.filter="",n.text2.style.opacity="100%",n.text1.style.filter="",n.text1.style.opacity="0%"}function C(){requestAnimationFrame(C);let e=new Date,q=c>0,R=(e-P)/1e3;P=e,c-=R,c<=0?(q&&y++,T()):$()}C()});
