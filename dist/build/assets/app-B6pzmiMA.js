function X(){return/Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function Y(){if(X())return;const a=document.getElementById("flowfield"),o=document.getElementById("fullystacked"),n=a.getContext("2d");let y=o.clientWidth,c=o.clientHeight;a.width=y,a.height=c;const f=20;let b,P,d,T=0;const O=1e3,$=[],E=[];let e={x:null,y:null},q=0;const R=1e3/6;function G(){y=o.clientWidth,c=o.clientHeight,a.width=y,a.height=c,b=Math.floor(y/f),P=Math.floor(c/f),d=new Array(b*P).fill(0)}window.addEventListener("resize",G),G(),window.addEventListener("mousemove",s=>{const t=a.getBoundingClientRect();e.x=s.clientX-t.left,e.y=s.clientY-t.top});class _{constructor(){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.p=Array.from({length:256},()=>Math.floor(Math.random()*256)),this.perm=[...this.p,...this.p]}dot(t,i,r,l){return t[0]*i+t[1]*r+t[2]*l}noise(t,i,r){const l=.3333333333333333,h=1/6;let u=(t+i+r)*l,A=Math.floor(t+u),I=Math.floor(i+u),D=Math.floor(r+u),N=(A+I+D)*h,C=t-(A-N),k=i-(I-N),m=r-(D-N),p,x,g,w,M,v;C>=k?k>=m?(p=1,x=0,g=0,w=1,M=1,v=0):C>=m?(p=1,x=0,g=0,w=1,M=0,v=1):(p=0,x=0,g=1,w=1,M=0,v=1):k<m?(p=0,x=0,g=1,w=0,M=1,v=1):C<m?(p=0,x=1,g=0,w=0,M=1,v=1):(p=0,x=1,g=0,w=1,M=1,v=0);const B=(W,H,z,ot)=>{let S=.6-W*W-H*H-z*z;return S<0?0:(S*=S,S*S*this.dot(this.grad3[ot],W,H,z))};let j=A&255,F=I&255,L=D&255,tt=this.perm[j+this.perm[F+this.perm[L]]]%12,et=this.perm[j+p+this.perm[F+x+this.perm[L+g]]]%12,it=this.perm[j+w+this.perm[F+M+this.perm[L+v]]]%12,st=this.perm[j+1+this.perm[F+1+this.perm[L+1]]]%12;return 32*(B(C,k,m,tt)+B(C-p+h,k-x+h,m-g+h,et)+B(C-w+2*h,k-M+2*h,m-v+2*h,it)+B(C-1+3*h,k-1+3*h,m-1+3*h,st))}}const K=new _;function Q(){let s=0;for(let t=0;t<P;t++)for(let i=0;i<b;i++){const r=K.noise(i*.1,t*.1,T)*Math.PI*2;d[s++]=r}}class U{constructor(){this.reset()}reset(){this.x=Math.random()*y,this.y=Math.random()*c,this.vx=0,this.vy=0,this.speed=1,this.history=[]}update(){const t=Math.floor(this.x/f),r=Math.floor(this.y/f)*b+t;if(d[r]!==void 0){const l=d[r];this.vx+=Math.cos(l)*.1,this.vy+=Math.sin(l)*.1}if(this.vx*=.9,this.vy*=.9,this.x+=this.vx,this.y+=this.vy,this.history.push([this.x,this.y]),this.history.length>5&&this.history.shift(),(this.x<0||this.x>y||this.y<0||this.y>c)&&this.reset(),e.x!==null&&e.y!==null){const l=Date.now(),h=this.x-e.x,u=this.y-e.y;Math.sqrt(h*h+u*u)<50&&l-q>R&&(E.push(new Z(this.x,this.y)),q=l)}}draw(t){if(this.history.length<2)return;t.beginPath(),t.moveTo(this.history[0][0],this.history[0][1]);for(let l=1;l<this.history.length;l++)t.lineTo(this.history[l][0],this.history[l][1]);let i=[188,58,160],r=.2;if(e.x!==null&&e.y!==null){let l=this.x-e.x,h=this.y-e.y,u=Math.sqrt(l*l+h*h);if(u<200){let A=1-u/200;i=i.map(I=>Math.min(255,I+A*(255-I)))}}t.strokeStyle=`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${r})`,t.lineWidth=1,t.stroke()}}class Z{constructor(t,i){this.x=t,this.y=i,this.vx=(Math.random()-.5)*1.5,this.vy=(Math.random()-.5)*1.5,this.life=60}update(){this.x+=this.vx,this.y+=this.vy,this.life--}draw(t){const i=this.life/60;t.beginPath(),t.arc(this.x,this.y,1,0,Math.PI*2),t.fillStyle=`rgba(255, 255, 255, ${i})`,t.fill()}isAlive(){return this.life>0}}for(let s=0;s<O;s++)$.push(new U);function J(){n.globalCompositeOperation="destination-out",n.fillStyle="rgba(0, 0, 0, 0.1)",n.fillRect(0,0,y,c),n.globalCompositeOperation="lighter",T+=.003,Q(),$.forEach(s=>{s.update(),s.draw(n)});for(let s=E.length-1;s>=0;s--){const t=E[s];t.update(),t.draw(n),t.isAlive()||E.splice(s,1)}requestAnimationFrame(J)}J(),setTimeout(()=>{a.classList.remove("opacity-0")},100)}X()||Y();window.addEventListener("resize",Y);const V=document.querySelectorAll("[data-word-rotator]");V.length&&V.forEach(a=>{const o={text1:a.querySelector(".text1"),text2:a.querySelector(".text2")},n=JSON.parse(a.dataset.wordRotator),y=1,c=.5;let f=n.length-1,b=new Date,P=0,d=c;o.text1.textContent=n[f%n.length],o.text2.textContent=n[(f+1)%n.length];function T(){P-=d,d=0;let e=P/y;e>1&&(d=c,e=1),O(e)}function O(e){o.text2.style.filter=`blur(${Math.min(8/e-8,100)}px)`,o.text2.style.opacity=`${Math.pow(e,.4)*100}%`,e=1-e,o.text1.style.filter=`blur(${Math.min(8/e-8,100)}px)`,o.text1.style.opacity=`${Math.pow(e,.4)*100}%`,o.text1.textContent=n[f%n.length],o.text2.textContent=n[(f+1)%n.length]}function $(){P=0,o.text2.style.filter="",o.text2.style.opacity="100%",o.text1.style.filter="",o.text1.style.opacity="0%"}function E(){requestAnimationFrame(E);let e=new Date,q=d>0,R=(e-b)/1e3;b=e,d-=R,d<=0?(q&&f++,T()):$()}E()});
